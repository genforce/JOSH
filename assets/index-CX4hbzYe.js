var J=l=>{throw TypeError(l)};var R=(l,h,u)=>h.has(l)||J("Cannot "+u);var t=(l,h,u)=>(R(l,h,"read from private field"),u?u.call(l):h.get(l)),m=(l,h,u)=>h.has(l)?J("Cannot add the same private member more than once"):h instanceof WeakSet?h.add(l):h.set(l,u),d=(l,h,u,x)=>(R(l,h,"write to private field"),x?x.call(l,u):h.set(l,u),u),I=(l,h,u)=>(R(l,h,"access private method"),u);(async()=>{var C,a,w,f,g,v,_,A,T,L,O,$,S,H,k;(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();const l="modulepreload",h=function(o){return"/JOSH-webpage/"+o},u={},x=function(o,e,n){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(e.map(y=>{if(y=h(y),y in u)return;u[y]=!0;const P=y.endsWith(".css"),re=P?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${re}`))return;const E=document.createElement("link");if(E.rel=P?"stylesheet":l,P||(E.as="script"),E.crossOrigin="",E.href=y,c&&E.setAttribute("nonce",c),document.head.appendChild(E),P)return new Promise((ne,se)=>{E.addEventListener("load",ne),E.addEventListener("error",()=>se(new Error(`Unable to preload CSS for ${y}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return o().catch(s)})};let B=null,N=null;async function W(){return(await x(async()=>{const{default:o}=await import("./re_viewer-BA9PaZRE.js");return{default:o}},[])).default}async function z(){return fetch(new URL("/JOSH-webpage/assets/re_viewer_bg-D3lypzTS.wasm",import.meta.url))}async function M(){(!B||!N)&&([B,N]=await Promise.all([W(),WebAssembly.compileStreaming(z())]));let o=B();return await o(N),class extends o.WebHandle{free(){super.free(),o.deinit()}}}let b=null;function D(){const o=new Uint8Array(16);return crypto.getRandomValues(o),Array.from(o).map(e=>e.toString(16).padStart(2,"0")).join("")}function V(o){return new Promise(e=>setTimeout(e,o))}class q{constructor(){m(this,A);m(this,C,D());m(this,a,null);m(this,w,null);m(this,f,"stopped");m(this,g,!1);m(this,v,!1);m(this,_,new Map);m(this,L,()=>{});m(this,O,()=>{b==null||b();const e=t(this,w),n=e.getBoundingClientRect(),r=()=>{e.style.left=n.left+"px",e.style.top=n.top+"px",e.style.width=n.width+"px",e.style.height=n.height+"px"},s=()=>e.removeAttribute("style"),i=c=>setTimeout(()=>requestAnimationFrame(c),U);e.classList.add(p.fullscreen_base,p.fullscreen_rect),r(),requestAnimationFrame(()=>{t(this,g)&&(e.classList.add(p.transition),i(()=>{t(this,g)&&(s(),document.body.classList.add(p.hide_scrollbars),document.documentElement.classList.add(p.hide_scrollbars),I(this,A,T).call(this,"fullscreen",!0))}))}),d(this,L,()=>{document.body.classList.remove(p.hide_scrollbars),document.documentElement.classList.remove(p.hide_scrollbars),r(),e.classList.remove(p.fullscreen_rect),i(()=>{t(this,g)||(s(),e.classList.remove(p.fullscreen_base,p.transition))}),b=null,d(this,g,!1),I(this,A,T).call(this,"fullscreen",!1)}),b=()=>t(this,L).call(this),d(this,g,!0)});K(),G()}async start(e,n,r){if(n??(n=document.body),r??(r={}),d(this,v,r.allow_fullscreen||!1),t(this,f)!=="stopped")return;d(this,f,"starting"),d(this,w,document.createElement("canvas")),t(this,w).style.width=r.width??"640px",t(this,w).style.height=r.height??"360px",n.append(t(this,w)),await V(0);let s=await M();if(t(this,f)!=="starting")return;const i=t(this,v)?{get_state:()=>t(this,g),on_toggle:()=>this.toggle_fullscreen()}:void 0;d(this,a,new s({...r,fullscreen:i}));try{await t(this,a).start(t(this,w))}catch(c){throw this.stop(),c}t(this,f)==="starting"&&(d(this,f,"ready"),I(this,A,T).call(this,"ready"),e&&this.open(e))}on(e,n){const r=t(this,_).get(e)??new Map;return r.set(n,{once:!1}),t(this,_).set(e,r),()=>r.delete(n)}once(e,n){const r=t(this,_).get(e)??new Map;return r.set(n,{once:!0}),t(this,_).set(e,r),()=>r.delete(n)}off(e,n){const r=t(this,_).get(e);r?r.delete(n):console.warn("Attempted to call `WebViewer.off` with an unregistered callback. Are you passing in the same function instance?")}get canvas(){return t(this,w)}get ready(){return t(this,f)==="ready"}open(e,n={}){if(!t(this,a))throw new Error(`attempted to open \`${e}\` in a stopped viewer`);const r=Array.isArray(e)?e:[e];for(const s of r)try{t(this,a).add_receiver(s,n.follow_if_http)}catch(i){throw this.stop(),i}}close(e){if(!t(this,a))throw new Error(`attempted to close \`${e}\` in a stopped viewer`);const n=Array.isArray(e)?e:[e];for(const r of n)try{t(this,a).remove_receiver(r)}catch(s){throw this.stop(),s}}stop(){var e,n,r;if(t(this,f)!=="stopped"){t(this,v)&&t(this,w)&&t(this,g)&&t(this,L).call(this),d(this,f,"stopped"),(e=t(this,w))==null||e.remove();try{(n=t(this,a))==null||n.destroy(),(r=t(this,a))==null||r.free()}catch(s){throw d(this,a,null),s}d(this,w,null),d(this,a,null),d(this,g,!1),d(this,v,!1)}}open_channel(e="rerun-io/web-viewer"){if(!t(this,a))throw new Error(`attempted to open channel "${e}" in a stopped web viewer`);const n=crypto.randomUUID();try{t(this,a).open_channel(n,e)}catch(c){throw this.stop(),c}const r=c=>{if(!t(this,a))throw new Error(`attempted to send data through channel "${e}" to a stopped web viewer`);try{t(this,a).send_rrd_to_channel(n,c)}catch(y){throw this.stop(),y}},s=()=>{if(!t(this,a))throw new Error(`attempted to send data through channel "${e}" to a stopped web viewer`);try{t(this,a).close_channel(n)}catch(c){throw this.stop(),c}},i=()=>t(this,f);return new j(r,s,i)}override_panel_state(e,n){if(!t(this,a))throw new Error(`attempted to set ${e} panel to ${n} in a stopped web viewer`);try{t(this,a).override_panel_state(e,n)}catch(r){throw this.stop(),r}}toggle_panel_overrides(e){if(!t(this,a))throw new Error("attempted to toggle panel overrides in a stopped web viewer");try{t(this,a).toggle_panel_overrides(e)}catch(n){throw this.stop(),n}}toggle_fullscreen(){if(t(this,v)){if(!t(this,a)||!t(this,w))throw new Error("attempted to toggle fullscreen mode in a stopped web viewer");t(this,g)?t(this,L).call(this):t(this,O).call(this)}}}C=new WeakMap,a=new WeakMap,w=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakSet,T=function(e,n){setTimeout(()=>{const r=t(this,_).get(e);if(r)for(const[s,{once:i}]of[...r.entries()])s(n),i&&r.delete(s)},0)},L=new WeakMap,O=new WeakMap;class j{constructor(e,n,r){m(this,$);m(this,S);m(this,H);m(this,k,!1);d(this,$,e),d(this,S,n),d(this,H,r)}get ready(){return!t(this,k)&&t(this,H).call(this)==="ready"}send_rrd(e){this.ready&&t(this,$).call(this,e)}close(){this.ready&&(t(this,S).call(this),d(this,k,!0))}}$=new WeakMap,S=new WeakMap,H=new WeakMap,k=new WeakMap;const p={hide_scrollbars:"rerun-viewer-hide-scrollbars",fullscreen_base:"rerun-viewer-fullscreen-base",fullscreen_rect:"rerun-viewer-fullscreen-rect",transition:"rerun-viewer-transition"},U=100,F=`
  html.${p.hide_scrollbars},
  body.${p.hide_scrollbars} {
    scrollbar-gutter: auto !important;
    overflow: hidden !important;
  }

  .${p.fullscreen_base} {
    position: fixed;
    z-index: 99999;
  }

  .${p.transition} {
    transition: all ${U/1e3}s linear;
  }

  .${p.fullscreen_rect} {
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
  }
`;function K(){const o="__rerun_viewer_style";if(document.getElementById(o))return;const e=document.createElement("style");e.id=o,e.appendChild(document.createTextNode(F)),document.head.appendChild(e)}function G(){window.addEventListener("keyup",o=>{o.code==="Escape"&&(b==null||b())})}const Q="https://raw.githubusercontent.com/genforce/JOSH-webpage/main/recordings/demo_1.rrd",X=document.getElementById("demo1");await new q().start(Q,X,{render_backend:"webgl",hide_welcome_screen:!0,panel_state_overrides:{top:"Hidden",blueprint:"Hidden"}});const Y="https://raw.githubusercontent.com/genforce/JOSH-webpage/main/recordings/demo_2.rrd",Z=document.getElementById("demo2");await new q().start(Y,Z,{render_backend:"webgl",hide_welcome_screen:!0,panel_state_overrides:{top:"Hidden",blueprint:"Hidden"}});const ee="https://raw.githubusercontent.com/genforce/JOSH-webpage/main/recordings/demo_3.rrd",te=document.getElementById("demo3");await new q().start(ee,te,{render_backend:"webgl",hide_welcome_screen:!0,panel_state_overrides:{top:"Hidden",blueprint:"Hidden"}})})();
