var D=c=>{throw TypeError(c)};var U=(c,h,u)=>h.has(c)||D("Cannot "+u);var t=(c,h,u)=>(U(c,h,"read from private field"),u?u.call(c):h.get(c)),f=(c,h,u)=>h.has(c)?D("Cannot add the same private member more than once"):h instanceof WeakSet?h.add(c):h.set(c,u),d=(c,h,u,T)=>(U(c,h,"write to private field"),T?T.call(c,u):h.set(c,u),u),k=(c,h,u)=>(U(c,h,"access private method"),u);(async()=>{var N,l,w,m,y,b,_,A,M,L,O,$,S,x,P;(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const c="modulepreload",h=function(i){return"/JOSH/"+i},u={},T=function(i,e,s){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(e.map(g=>{if(g=h(g),g in u)return;u[g]=!0;const H=g.endsWith(".css"),ee=H?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${ee}`))return;const E=document.createElement("link");if(E.rel=H?"stylesheet":c,H||(E.as="script"),E.crossOrigin="",E.href=g,a&&E.setAttribute("nonce",a),document.head.appendChild(E),H)return new Promise((te,re)=>{E.addEventListener("load",te),E.addEventListener("error",()=>re(new Error(`Unable to preload CSS for ${g}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return i().catch(n)})};let C=null,I=null;async function R(){return(await T(async()=>{const{default:i}=await import("./re_viewer-BA9PaZRE.js");return{default:i}},[])).default}async function W(){return fetch(new URL("/JOSH/assets/re_viewer_bg-D3lypzTS.wasm",import.meta.url))}async function J(){(!C||!I)&&([C,I]=await Promise.all([R(),WebAssembly.compileStreaming(W())]));let i=C();return await i(I),class extends i.WebHandle{free(){super.free(),i.deinit()}}}let v=null;function V(){const i=new Uint8Array(16);return crypto.getRandomValues(i),Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join("")}function j(i){return new Promise(e=>setTimeout(e,i))}class z{constructor(){f(this,A);f(this,N,V());f(this,l,null);f(this,w,null);f(this,m,"stopped");f(this,y,!1);f(this,b,!1);f(this,_,new Map);f(this,L,()=>{});f(this,O,()=>{v==null||v();const e=t(this,w),s=e.getBoundingClientRect(),r=()=>{e.style.left=s.left+"px",e.style.top=s.top+"px",e.style.width=s.width+"px",e.style.height=s.height+"px"},n=()=>e.removeAttribute("style"),o=a=>setTimeout(()=>requestAnimationFrame(a),q);e.classList.add(p.fullscreen_base,p.fullscreen_rect),r(),requestAnimationFrame(()=>{t(this,y)&&(e.classList.add(p.transition),o(()=>{t(this,y)&&(n(),document.body.classList.add(p.hide_scrollbars),document.documentElement.classList.add(p.hide_scrollbars),k(this,A,M).call(this,"fullscreen",!0))}))}),d(this,L,()=>{document.body.classList.remove(p.hide_scrollbars),document.documentElement.classList.remove(p.hide_scrollbars),r(),e.classList.remove(p.fullscreen_rect),o(()=>{t(this,y)||(n(),e.classList.remove(p.fullscreen_base,p.transition))}),v=null,d(this,y,!1),k(this,A,M).call(this,"fullscreen",!1)}),v=()=>t(this,L).call(this),d(this,y,!0)});G(),Q()}async start(e,s,r){if(s??(s=document.body),r??(r={}),d(this,b,r.allow_fullscreen||!1),t(this,m)!=="stopped")return;d(this,m,"starting"),d(this,w,document.createElement("canvas")),t(this,w).style.width=r.width??"640px",t(this,w).style.height=r.height??"360px",s.append(t(this,w)),await j(0);let n=await J();if(t(this,m)!=="starting")return;const o=t(this,b)?{get_state:()=>t(this,y),on_toggle:()=>this.toggle_fullscreen()}:void 0;d(this,l,new n({...r,fullscreen:o}));try{await t(this,l).start(t(this,w))}catch(a){throw this.stop(),a}t(this,m)==="starting"&&(d(this,m,"ready"),k(this,A,M).call(this,"ready"),e&&this.open(e))}on(e,s){const r=t(this,_).get(e)??new Map;return r.set(s,{once:!1}),t(this,_).set(e,r),()=>r.delete(s)}once(e,s){const r=t(this,_).get(e)??new Map;return r.set(s,{once:!0}),t(this,_).set(e,r),()=>r.delete(s)}off(e,s){const r=t(this,_).get(e);r?r.delete(s):console.warn("Attempted to call `WebViewer.off` with an unregistered callback. Are you passing in the same function instance?")}get canvas(){return t(this,w)}get ready(){return t(this,m)==="ready"}open(e,s={}){if(!t(this,l))throw new Error(`attempted to open \`${e}\` in a stopped viewer`);const r=Array.isArray(e)?e:[e];for(const n of r)try{t(this,l).add_receiver(n,s.follow_if_http)}catch(o){throw this.stop(),o}}close(e){if(!t(this,l))throw new Error(`attempted to close \`${e}\` in a stopped viewer`);const s=Array.isArray(e)?e:[e];for(const r of s)try{t(this,l).remove_receiver(r)}catch(n){throw this.stop(),n}}stop(){var e,s,r;if(t(this,m)!=="stopped"){t(this,b)&&t(this,w)&&t(this,y)&&t(this,L).call(this),d(this,m,"stopped"),(e=t(this,w))==null||e.remove();try{(s=t(this,l))==null||s.destroy(),(r=t(this,l))==null||r.free()}catch(n){throw d(this,l,null),n}d(this,w,null),d(this,l,null),d(this,y,!1),d(this,b,!1)}}open_channel(e="rerun-io/web-viewer"){if(!t(this,l))throw new Error(`attempted to open channel "${e}" in a stopped web viewer`);const s=crypto.randomUUID();try{t(this,l).open_channel(s,e)}catch(a){throw this.stop(),a}const r=a=>{if(!t(this,l))throw new Error(`attempted to send data through channel "${e}" to a stopped web viewer`);try{t(this,l).send_rrd_to_channel(s,a)}catch(g){throw this.stop(),g}},n=()=>{if(!t(this,l))throw new Error(`attempted to send data through channel "${e}" to a stopped web viewer`);try{t(this,l).close_channel(s)}catch(a){throw this.stop(),a}},o=()=>t(this,m);return new F(r,n,o)}override_panel_state(e,s){if(!t(this,l))throw new Error(`attempted to set ${e} panel to ${s} in a stopped web viewer`);try{t(this,l).override_panel_state(e,s)}catch(r){throw this.stop(),r}}toggle_panel_overrides(e){if(!t(this,l))throw new Error("attempted to toggle panel overrides in a stopped web viewer");try{t(this,l).toggle_panel_overrides(e)}catch(s){throw this.stop(),s}}toggle_fullscreen(){if(t(this,b)){if(!t(this,l)||!t(this,w))throw new Error("attempted to toggle fullscreen mode in a stopped web viewer");t(this,y)?t(this,L).call(this):t(this,O).call(this)}}}N=new WeakMap,l=new WeakMap,w=new WeakMap,m=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakMap,A=new WeakSet,M=function(e,s){setTimeout(()=>{const r=t(this,_).get(e);if(r)for(const[n,{once:o}]of[...r.entries()])n(s),o&&r.delete(n)},0)},L=new WeakMap,O=new WeakMap;class F{constructor(e,s,r){f(this,$);f(this,S);f(this,x);f(this,P,!1);d(this,$,e),d(this,S,s),d(this,x,r)}get ready(){return!t(this,P)&&t(this,x).call(this)==="ready"}send_rrd(e){this.ready&&t(this,$).call(this,e)}close(){this.ready&&(t(this,S).call(this),d(this,P,!0))}}$=new WeakMap,S=new WeakMap,x=new WeakMap,P=new WeakMap;const p={hide_scrollbars:"rerun-viewer-hide-scrollbars",fullscreen_base:"rerun-viewer-fullscreen-base",fullscreen_rect:"rerun-viewer-fullscreen-rect",transition:"rerun-viewer-transition"},q=100,K=`
  html.${p.hide_scrollbars},
  body.${p.hide_scrollbars} {
    scrollbar-gutter: auto !important;
    overflow: hidden !important;
  }

  .${p.fullscreen_base} {
    position: fixed;
    z-index: 99999;
  }

  .${p.transition} {
    transition: all ${q/1e3}s linear;
  }

  .${p.fullscreen_rect} {
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
  }
`;function G(){const i="__rerun_viewer_style";if(document.getElementById(i))return;const e=document.createElement("style");e.id=i,e.appendChild(document.createTextNode(K)),document.head.appendChild(e)}function Q(){window.addEventListener("keyup",i=>{i.code==="Escape"&&(v==null||v())})}const X="https://raw.githubusercontent.com/genforce/JOSH/main/recordings/demo_1.rrd",Y=document.getElementById("demo1"),Z=new z;let B=!1;window.addEventListener("scroll",()=>{B=!0}),window.addEventListener("DOMContentLoaded",function(){const i=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(e){this.classList.contains("allow-focus")&&i.call(this,e)},window.addEventListener("load",()=>{B||window.scrollTo(0,0)})}),await Z.start(X,Y,{render_backend:"webgl",hide_welcome_screen:!0,panel_state_overrides:{top:"Hidden",blueprint:"Hidden"}})})();
